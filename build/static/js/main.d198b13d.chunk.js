(this["webpackJsonprandom-image-app"]=this["webpackJsonprandom-image-app"]||[]).push([[0],{22:function(e,t,r){},64:function(e,t,r){"use strict";r.r(t);var n=r(1),o=r.n(n),a=r(32),s=r.n(a),c=r(10),i=(r(22),r(13)),d=r(4),l=r.n(d),u=r(11),p=r(8),b=r(12),j=r.n(b),m=r(2),h=r(0),g={background:"#1E1E1E",width:"100%",padding:"0 .5rem",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},x={display:"flex"},f={padding:".5rem",textDecoration:"none",color:"inherit",cursor:"pointer"},v=function(e){var t=e.text,r=e.loggedUser;return Object(h.jsxs)("div",{style:g,children:[Object(h.jsx)(c.b,{style:f,to:"/",children:Object(h.jsxs)("div",{className:"logo-text",children:[Object(h.jsx)("h1",{children:t}),Object(h.jsx)("div",{children:function(){var e=new Date;return Intl.DateTimeFormat().format(e)}()})]})}),Object(h.jsx)("div",{style:x,children:!r&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(c.b,{style:f,to:"/login",children:"Login"}),Object(h.jsx)(c.b,{style:f,to:"/register",children:"Register"})]})})]})},O={background:"#F4F5F7",width:"80%",display:"flex",flexDirection:"column",margin:"auto",marginBottom:".5rem",marginTop:"2rem",padding:"1rem",borderRadius:"4px",color:"#272727",border:"1px solid #dbdcde"},y={display:"flex",justifyContent:"space-between",fontSize:"1.5rem",fontWeight:"bold",paddingBottom:".5rem"},w={background:"#1E1E1E",color:"#fff",border:"1px solid #1E1E1E",padding:".5rem 1rem",borderRadius:"4px",cursor:"pointer",marginRight:".5rem"},E=function(e){var t=e.movie,r=e.toggleSeen,n=e.removeMovie,o=e.updateMovie,a=e.isUpdating;return Object(h.jsxs)("div",{className:"movie-container",style:O,children:[Object(h.jsxs)("div",{className:"movie-header",style:y,children:[a?Object(h.jsx)("input",{}):Object(h.jsx)("div",{children:t.title}),Object(h.jsx)("div",{style:{cursor:"pointer"},onClick:function(){return r(t._id)},children:t.seen?Object(h.jsx)("span",{children:"\u2705"}):Object(h.jsx)("span",{children:"\u274e"})})]}),Object(h.jsxs)("div",{className:"movie-footer",children:[Object(h.jsx)("button",{style:w,onClick:function(){return n(t._id)},children:"Delete movie"}),a&&Object(h.jsx)("button",{style:w,children:"Save"}),Object(h.jsx)("button",{style:w,onClick:function(){return o(t._id)},children:a?"Cancel":"Update movie"})]})]})},k=r(34),C={width:"85%",padding:".5rem 0",borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px",background:"#F4F5F7",border:"1px solid #dbdcde",color:"#1E1E1E",marginBottom:"1rem"},S={width:"15%",padding:".5rem 0",background:"#16C60C",color:"#fff",borderTop:"1px solid #EAEDF2",borderBottom:"1px solid #EAEDF2",borderRight:"1px solid #EAEDF2",borderLeft:"none",borderTopRightRadius:"4px",borderBottomRightRadius:"4px",cursor:"pointer"},R=function(e){var t=e.movies,r=e.setMovies,o=e.loggedUser,a=Object(n.useState)(""),s=Object(p.a)(a,2),c=s[0],i=s[1];console.log(o);var d=function(){var e=Object(u.a)(l.a.mark((function e(n){var a,s,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={title:c,seen:!1,user:o._id},e.prev=1,e.next=4,j.a.post("/api",a);case 4:s=e.sent,d=s.data,r([].concat(Object(k.a)(t),[d])),i(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("form",{style:{width:"80%",display:"flex",alignItems:"flex-start",paddingTop:"2rem"},children:[Object(h.jsx)("input",{style:C,value:c,onChange:function(e){return i(e.target.value)},required:!0}),Object(h.jsx)("button",{type:"button",onClick:o&&d,style:S,children:"Add movie"})]})},F={width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},D={width:"50%",display:"flex",flexDirection:"column",padding:"2rem 3rem",background:"#F4F5F7",borderRadius:4,textAlign:"center",border:"1px solid #dbdcde"},B={padding:".5rem 1rem",marginBottom:".1rem",borderRadius:4,border:"1px solid grey"},U={padding:".5rem 1rem",marginBottom:".5rem",borderRadius:4,border:"1px solid grey",background:"#1E1E1E",color:"#fff"},M=function(e){var t=e.header,r=e.setLoggedUser,o=e.history,a=Object(n.useState)({username:"",password:""}),s=Object(p.a)(a,2),d=s[0],b=s[1],m=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,j.a.post("".concat("api/users","/login"),d);case 4:n=e.sent,r(n.data),setTimeout((function(){o.push("/")}),1e3),b({username:"",password:""}),e.next=16;break;case 10:if(e.prev=10,e.t0=e.catch(1),e.t0.response){e.next=15;break}return console.log("Network error",e.t0),e.abrupt("return");case 15:console.log(e.t0.response.data,e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{style:F,children:Object(h.jsxs)("form",{onSubmit:m,style:D,children:[Object(h.jsx)("h2",{style:{paddingBottom:"1rem"},children:t}),Object(h.jsx)("input",{name:"username",value:d.username,style:B,placeholder:"Username",onChange:function(e){return b(Object(i.a)(Object(i.a)({},d),{},{username:e.target.value}))}}),Object(h.jsx)("input",{name:"password",value:d.password,style:B,placeholder:"Password",type:"password",onChange:function(e){return b(Object(i.a)(Object(i.a)({},d),{},{password:e.target.value}))}}),Object(h.jsx)("button",{style:U,children:"Sign in"}),Object(h.jsx)(c.b,{to:"/register",children:"Don't have an account yet?"})]})})},T=function(e){var t=e.header,r=e.history,o=Object(n.useState)(""),a=Object(p.a)(o,2),s=a[0],i=a[1],d=Object(n.useState)(""),b=Object(p.a)(d,2),m=b[0],g=b[1],x=Object(n.useState)(""),f=Object(p.a)(x,2),v=f[0],O=f[1],y=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:s,email:m,password:v},e.prev=2,e.next=5,j.a.post("".concat("api/users","/register"),n);case 5:i(""),g(""),O(""),r.push("/login"),e.next=17;break;case 11:if(e.prev=11,e.t0=e.catch(2),e.t0.response){e.next=16;break}return console.log("Network error",e.t0),e.abrupt("return");case 16:console.log(e.t0.response.data,e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{style:F,children:Object(h.jsxs)("form",{onSubmit:y,style:D,children:[Object(h.jsx)("h2",{style:{paddingBottom:"1rem"},children:t}),Object(h.jsx)("input",{name:"username",style:B,placeholder:"Username",value:s,onChange:function(e){return i(e.target.value)}}),Object(h.jsx)("input",{name:"email",style:B,placeholder:"Email",type:"email",value:m,onChange:function(e){return g(e.target.value)}}),Object(h.jsx)("input",{name:"password",style:B,placeholder:"Password",type:"password",value:v,onChange:function(e){return O(e.target.value)}}),Object(h.jsx)("button",{type:"submit",style:U,children:"Sign in"}),Object(h.jsx)(c.b,{to:"/login",children:"Allready have and account? Sign in."})]})})},A={background:"#1E1E1E",width:"30%",color:"#fff",border:"1px solid #1E1E1E",padding:".5rem 1rem",borderRadius:"4px",cursor:"pointer",margin:".5rem 0"},L=function(e){var t=e.handleShowTodoCount,r=e.showMovieCount,n=e.movies;return Object(h.jsxs)("div",{style:{width:"80%",padding:"1rem"},children:[Object(h.jsx)("button",{style:A,onClick:t,children:r?"Hide movie count":"Show movie count"}),r&&Object(h.jsx)("div",{children:"You have ".concat(n.length," movies listed")})]})},N=function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),r=t[0],o=t[1],a=Object(n.useState)([]),s=Object(p.a)(a,2),c=s[0],d=s[1],b=Object(n.useState)(null),g=Object(p.a)(b,2),x=g[0],f=g[1],O=Object(m.e)(),y="/api";console.log(x),Object(n.useEffect)((function(){x&&d(x.movies)}),[x]);var w=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.delete("".concat(y,"/").concat(t));case 3:d(c.filter((function(e){return e._id!==t}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(l.a.mark((function e(t){var r,n,o,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),r=c.find((function(e){return e._id===t})),n=Object(i.a)(Object(i.a)({},r),{},{seen:!r.seen}),e.prev=3,e.next=6,j.a.put("".concat(y,"/").concat(t),n);case 6:o=e.sent,a=o.data,d(c.map((function(e){return e._id===t?a:e}))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){};return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(v,{text:"Movie Database",loggedUser:x}),Object(h.jsxs)(m.a,{path:"/",exact:!0,children:[Object(h.jsx)(R,{movies:c,setMovies:d,loggedUser:x}),c.map((function(e){return Object(h.jsx)(E,{movie:e,removeMovie:w,toggleSeen:k,updateMovie:C})})),Object(h.jsx)(L,{handleShowTodoCount:function(){o(!r)},showMovieCount:r,movies:c})]}),Object(h.jsx)(m.a,{path:"/login",children:Object(h.jsx)(M,{header:"Login",loggedUser:x,setLoggedUser:f,history:O})}),Object(h.jsx)(m.a,{path:"/register",children:Object(h.jsx)(T,{header:"Register",history:O})})]})};s.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(c.a,{children:Object(h.jsx)(N,{})})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.d198b13d.chunk.js.map